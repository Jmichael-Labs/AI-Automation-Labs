name: Reddit AI Bot Cron
on:
  schedule:
    # Run every 5 minutes for testing
    - cron: '*/5 * * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  ping-reddit-bot:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Reddit AI Bot
        run: |
          echo "ðŸš€ Pinging Reddit AI Bot on Render..."
          
          # Render service URL - will be active after deployment
          BOT_URL="https://reddit-ai-problem-solver.onrender.com"
          
          # Ping health check
          curl -f "$BOT_URL/" || echo "Health check failed"
          
          # Trigger bot run with POST
          echo "âš¡ Triggering bot scan..."
          response=$(curl -X POST -s -f "$BOT_URL/run" --max-time 300 || echo "Bot run failed")
          echo "$response"
          
          # Log results
          echo "âœ… Bot ping completed at $(date)"
          
          # Optional: Send results to webhook/notification service
          # curl -X POST your-webhook-url -d "Bot status: $response"