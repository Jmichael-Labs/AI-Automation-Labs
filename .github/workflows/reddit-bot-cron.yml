name: JMichael Labs AI News Poster
on:
  schedule:
    # Run once daily at 10 AM EDT (14:00 UTC) - Newark, NJ timezone
    - cron: '0 14 * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  trigger-ai-news-post:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger AI News Posting
        run: |
          echo "ðŸš€ Triggering daily AI news post..."
          
          # Render service URL - will be active after deployment
          BOT_URL="https://reddit-ai-problem-solver.onrender.com"
          
          # Ping health check
          curl -f "$BOT_URL/" || echo "Health check failed"
          
          # Trigger daily AI news post
          echo "âš¡ Triggering daily AI news post..."
          response=$(curl -X POST -s -f "$BOT_URL/run" --max-time 300 || echo "Post failed")
          echo "$response"
          
          # Log results
          echo "âœ… AI News posting completed at $(date)"
          
          # Optional: Send results to webhook/notification service
          # curl -X POST your-webhook-url -d "Bot status: $response"